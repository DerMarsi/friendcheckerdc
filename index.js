function K(...q){try{let z=globalThis;if(z.vendetta?.metro?.findByProps)return z.vendetta.metro.findByProps(...q);if(z.revenge?.modules?.findByProps)return z.revenge.modules.findByProps(...q);if(z.modules?.find)return z.modules.find((J)=>J&&q.every((N)=>J[N]!==void 0));if(z.webpackChunkdiscord_app);return console.warn(`[ActivityTracker] findByProps failed to find environment for props: ${q.join(", ")}`),null}catch(z){return console.error("[ActivityTracker] findByProps error:",z),null}}var x={log:(q,...z)=>console.log(`[ActivityTracker] ${q}`,...z),warn:(q,...z)=>console.warn(`[ActivityTracker] ${q}`,...z),error:(q,...z)=>console.error(`[ActivityTracker] ${q}`,...z)};var X=K("createElement","useState","useEffect"),I=K("FormSection","FormRow")||{},{FormSection:M,FormRow:Z,FormInput:w}=I,_=({settings:q,refresh:z})=>{let[J,N]=X.useState(q.targetUserId||""),O=(E)=>{N(E),q.targetUserId=E,z()};return X.createElement(M,{title:"Target Configuration"},X.createElement(Z,{label:"Target User ID",subLabel:"The Discord User ID to track presence for.",control:X.createElement(w,{placeholder:"123456789...",value:J,onChange:(E)=>O(E),style:{width:"100%",fontFamily:"monospace"}})}),X.createElement(Z,{label:"Status",subLabel:`Currently tracking: ${J||"None"}`}))};var H={targetUserId:"561478149184028673"},L,$,j,k=(q)=>{if(q.user.id!==H.targetUserId)return;let z=q.status,J=q.client_status?JSON.stringify(q.client_status):"unknown";if(x.log(`[PRESENCE] Status: ${z} | Clients: ${J}`),q.activities&&q.activities.length>0)q.activities.forEach((N)=>{x.log(`[ACTIVITY] ${N.name}: ${N.state||""} ${N.details||""}`)})},W=(q)=>{if(q.userId!==H.targetUserId)return;x.log(`[TYPING] User is typing in channel ${q.channelId}`)},C=(q)=>{if(q.message.author.id!==H.targetUserId)return;x.log(`[MESSAGE] User sent a message in channel ${q.channelId}: ${q.message.content}`)},V=(q)=>{if(q.userId!==H.targetUserId)return;if(q.channelId)x.log(`[VOICE] User joined/moved to voice channel ${q.channelId}`);else x.log("[VOICE] User left voice channel")},D={name:"Activity Tracker",description:"Logs specific user activity to the console",author:"User",version:"1.0.0",start:()=>{try{x.log("Activity Tracker Plugin Loading..."),L=K("subscribe","dispatch","register"),$=K("getCurrentUser","getUser"),j=K("getStatus","getPresence");let q=K("getUserProfile"),z=K("getGuild","getGuilds"),J=K("getMember","getMembers"),N=K("fetchProfile");if(!L){x.error("Failed to find Dispatcher module! Plugins modules might be missing.");return}if(L.subscribe("PRESENCE_UPDATE",k),L.subscribe("TYPING_START",W),L.subscribe("MESSAGE_CREATE",C),L.subscribe("VOICE_STATE_UPDATE",V),x.log(`[INIT] Starting enhanced discovery for ${H.targetUserId}...`),z&&J){let Y=Object.values(z.getGuilds()).filter((Q)=>J.getMember(Q.id,H.targetUserId));x.log(`[DATA] Found ${Y.length} Mutual Guilds:`),Y.forEach((Q)=>{let T=J.getMember(Q.id,H.targetUserId)?.roles||[];x.log(` - Guild: ${Q.name} (ID: ${Q.id}) | Roles: ${T.length}`)})}try{if(N)x.log("[DATA] Attempting to fetch full profile..."),N.fetchProfile(H.targetUserId),setTimeout(()=>{let E=q?.getUserProfile(H.targetUserId);if(E){if(x.log(`[PROFILE] Bio: ${E.bio||"None"}`),E.connected_accounts)x.log(`[PROFILE] Connections: ${E.connected_accounts.map((Y)=>Y.type).join(", ")}`);if(E.premium_since)x.log(`[PROFILE] Nitro since: ${E.premium_since}`)}else x.log("[PROFILE] Profile data not available yet.")},2000);else x.warn("[DATA] ProfileActions module not found, cannot fetch full profile.")}catch(E){x.error("[DATA] Error fetching profile",E)}let O=$?.getUser(H.targetUserId);if(O){let E=j?.getStatus(H.targetUserId);x.log(`[INIT] Target found in cache! Current Status: ${E}`),x.log(`[USER] Username: ${O.username}#${O.discriminator}`)}else x.log(`[INIT] Target user ${H.targetUserId} not currently cached or found in mutual guilds.`)}catch(q){x.error("FATAL: Failed to start Activity Tracker plugin:",q)}},stop:()=>{try{if(x.log("Activity Tracker Plugin Unloading..."),L)L.unsubscribe("PRESENCE_UPDATE",k),L.unsubscribe("TYPING_START",W),L.unsubscribe("MESSAGE_CREATE",C),L.unsubscribe("VOICE_STATE_UPDATE",V)}catch(q){x.error("FATAL: Failed to stop Activity Tracker plugin:",q)}},getSettingsPanel:({settings:q})=>{return _({settings:H,refresh:()=>{}})}};export{D as default};
