var{defineProperty:Z,getOwnPropertyNames:w,getOwnPropertyDescriptor:F}=Object,G=Object.prototype.hasOwnProperty;var _=new WeakMap,R=(q)=>{var x=_.get(q),E;if(x)return x;if(x=Z({},"__esModule",{value:!0}),q&&typeof q==="object"||typeof q==="function")w(q).map((H)=>!G.call(x,H)&&Z(x,H,{get:()=>q[H],enumerable:!(E=F(q,H))||E.enumerable}));return _.set(q,x),x};var A=(q,x)=>{for(var E in x)Z(q,E,{get:x[E],enumerable:!0,configurable:!0,set:(H)=>x[E]=()=>H})};var v={};A(v,{default:()=>U});module.exports=R(v);function L(...q){try{let x=globalThis;if(x.vendetta?.metro?.findByProps)return x.vendetta.metro.findByProps(...q);if(x.revenge?.modules?.findByProps)return x.revenge.modules.findByProps(...q);if(x.modules?.find)return x.modules.find((E)=>E&&q.every((H)=>E[H]!==void 0));if(x.webpackChunkdiscord_app);return console.warn(`[ActivityTracker] findByProps failed to find environment for props: ${q.join(", ")}`),null}catch(x){return console.error("[ActivityTracker] findByProps error:",x),null}}var z={log:(q,...x)=>console.log(`[ActivityTracker] ${q}`,...x),warn:(q,...x)=>console.warn(`[ActivityTracker] ${q}`,...x),error:(q,...x)=>console.error(`[ActivityTracker] ${q}`,...x)};var X=L("createElement","useState","useEffect"),B=L("FormSection","FormRow")||{},{FormSection:b,FormRow:$,FormInput:D}=B,j=({settings:q,refresh:x})=>{let[E,H]=X.useState(q.targetUserId||""),O=(J)=>{H(J),q.targetUserId=J,x()};return X.createElement(b,{title:"Target Configuration"},X.createElement($,{label:"Target User ID",subLabel:"The Discord User ID to track presence for.",control:X.createElement(D,{placeholder:"123456789...",value:E,onChange:(J)=>O(J),style:{width:"100%",fontFamily:"monospace"}})}),X.createElement($,{label:"Status",subLabel:`Currently tracking: ${E||"None"}`}))};var K={targetUserId:"561478149184028673"},N,k,W,C=(q)=>{if(q.user.id!==K.targetUserId)return;let x=q.status,E=q.client_status?JSON.stringify(q.client_status):"unknown";if(z.log(`[PRESENCE] Status: ${x} | Clients: ${E}`),q.activities&&q.activities.length>0)q.activities.forEach((H)=>{z.log(`[ACTIVITY] ${H.name}: ${H.state||""} ${H.details||""}`)})},V=(q)=>{if(q.userId!==K.targetUserId)return;z.log(`[TYPING] User is typing in channel ${q.channelId}`)},T=(q)=>{if(q.message.author.id!==K.targetUserId)return;z.log(`[MESSAGE] User sent a message in channel ${q.channelId}: ${q.message.content}`)},I=(q)=>{if(q.userId!==K.targetUserId)return;if(q.channelId)z.log(`[VOICE] User joined/moved to voice channel ${q.channelId}`);else z.log("[VOICE] User left voice channel")},U={name:"Activity Tracker",description:"Logs specific user activity to the console",author:"DerMarsi",version:"1.0.0",start:()=>{try{z.log("Activity Tracker Plugin Loading..."),N=L("subscribe","dispatch","register"),k=L("getCurrentUser","getUser"),W=L("getStatus","getPresence");let q=L("getUserProfile"),x=L("getGuild","getGuilds"),E=L("getMember","getMembers"),H=L("fetchProfile");if(!N){z.error("Failed to find Dispatcher module! Plugins modules might be missing.");return}if(N.subscribe("PRESENCE_UPDATE",C),N.subscribe("TYPING_START",V),N.subscribe("MESSAGE_CREATE",T),N.subscribe("VOICE_STATE_UPDATE",I),z.log(`[INIT] Starting enhanced discovery for ${K.targetUserId}...`),x&&E){let Y=Object.values(x.getGuilds()).filter((Q)=>E.getMember(Q.id,K.targetUserId));z.log(`[DATA] Found ${Y.length} Mutual Guilds:`),Y.forEach((Q)=>{let M=E.getMember(Q.id,K.targetUserId)?.roles||[];z.log(` - Guild: ${Q.name} (ID: ${Q.id}) | Roles: ${M.length}`)})}try{if(H)z.log("[DATA] Attempting to fetch full profile..."),H.fetchProfile(K.targetUserId),setTimeout(()=>{let J=q?.getUserProfile(K.targetUserId);if(J){if(z.log(`[PROFILE] Bio: ${J.bio||"None"}`),J.connected_accounts)z.log(`[PROFILE] Connections: ${J.connected_accounts.map((Y)=>Y.type).join(", ")}`);if(J.premium_since)z.log(`[PROFILE] Nitro since: ${J.premium_since}`)}else z.log("[PROFILE] Profile data not available yet.")},2000);else z.warn("[DATA] ProfileActions module not found, cannot fetch full profile.")}catch(J){z.error("[DATA] Error fetching profile",J)}let O=k?.getUser(K.targetUserId);if(O){let J=W?.getStatus(K.targetUserId);z.log(`[INIT] Target found in cache! Current Status: ${J}`),z.log(`[USER] Username: ${O.username}#${O.discriminator}`)}else z.log(`[INIT] Target user ${K.targetUserId} not currently cached or found in mutual guilds.`)}catch(q){z.error("FATAL: Failed to start Activity Tracker plugin:",q)}},stop:()=>{try{if(z.log("Activity Tracker Plugin Unloading..."),N)N.unsubscribe("PRESENCE_UPDATE",C),N.unsubscribe("TYPING_START",V),N.unsubscribe("MESSAGE_CREATE",T),N.unsubscribe("VOICE_STATE_UPDATE",I)}catch(q){z.error("FATAL: Failed to stop Activity Tracker plugin:",q)}},getSettingsPanel:({settings:q})=>{return j({settings:K,refresh:()=>{}})}};
